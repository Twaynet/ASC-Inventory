CLIENT API USAGE SNAPSHOT
Generated: 2026-02-14
Source: ASC-Inventory web client (apps/web)
Scope: Client-to-API usage as implemented

================================================================================
A) Client API wrapper inventory
================================================================================

Primary HTTP client module:
apps/web/src/lib/api/client.ts
  Exported surface:
    request<T>(endpoint: string, options?: RequestOptions): Promise<T>
    ApiError class
    resolveAssetUrl(assetUrl: string): string
    API_BASE constant
    RequestOptions interface
  Base URL configuration:
    Source: process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'
    File path: apps/web/src/lib/api/client.ts line 20
  Features:
    Authorization header injection (Bearer token)
    X-Access-Purpose header injection (auto-resolved from endpoint path for PHI compliance)
    X-Active-Persona header injection (from localStorage)
    X-Emergency-Justification header injection
    JSON request/response handling
    Error normalization to ApiError
    Data envelope unwrapping ({ data } → payload)
    Zod schema validation (request and response)

Contract-based HTTP client helper:
apps/web/src/lib/api/contract-client.ts
  Exported surface:
    callContract<R>(route: R, opts?: ContractCallOptions): Promise<...>
    ContractCallOptions interface
  Base URL: Uses request() from client.ts
  File path: apps/web/src/lib/api/contract-client.ts
  Features:
    URL path construction from contract route templates
    Path parameter substitution
    Query string building
    Body and response schema validation via contract definitions
    Type-safe response inference from Zod schemas

Backward compatibility shim:
apps/web/src/lib/api.ts
  Exported surface: Re-exports all functions from domain-specific modules
  File path: apps/web/src/lib/api.ts
  Purpose: Legacy import compatibility
  Note: Deprecated, new code should import from domain modules directly

Domain-specific API wrapper modules:

apps/web/src/lib/api/auth.ts
  Exports: login, getMe, logout, LoginResponse
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/cases.ts
  Exports: getCases, getCase, createCase, activateCase, deactivateCase, cancelCase, checkInPreop, approveCase, rejectCase, updateCase, deleteCase, assignCaseRoom, getCaseStatusEvents, Case, ActivateCaseRequest, CaseStatusEvent
  Base URL: Uses callContract() and request() from client.ts
  Dependencies: @asc/contract, schemas.ts

apps/web/src/lib/api/catalog.ts
  Exports: getCatalogItems, getCatalogItem, createCatalogItem, updateCatalogItem, deactivateCatalogItem, activateCatalogItem, getCatalogImages, addCatalogImageByUrl, uploadCatalogImage, updateCatalogImage, deleteCatalogImage, getCatalogIdentifiers, addCatalogIdentifier, deleteCatalogIdentifier, getCatalogGroups, createCatalogGroup, updateCatalogGroup, getCatalogGroupItems, addCatalogGroupItems, removeCatalogGroupItem, getCatalogSets, createCatalogSet, getSetComponents, addSetComponent, updateSetComponent, removeSetComponent, getCatalogCostEvents
  Base URL: Uses callContract() and request() from client.ts
  Dependencies: @asc/contract, schemas.ts

apps/web/src/lib/api/inventory.ts
  Exports: getInventoryItems, getInventoryItem, createInventoryItem, updateInventoryItem, getInventoryItemHistory, createInventoryEvent, sendDeviceEvent, createDeviceEvent, getDevices, getInventoryRiskQueue, getMissingAnalytics, getMissingEvents, getOpenMissingAging, lookupInventoryItem, getDeviceEvents, getInventoryEvents
  Base URL: Uses callContract() and request() from client.ts
  Dependencies: @asc/contract, schemas.ts

apps/web/src/lib/api/readiness.ts
  Exports: getDayBeforeReadiness, getCalendarSummary, createAttestation, voidAttestation, refreshReadiness, getCaseVerification
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/checklists.ts
  Exports: getCaseChecklists, startChecklist, respondToChecklist, signChecklist, completeChecklist, recordAsyncReview, getPendingReviews, getMyPendingReviews, getFlaggedReviews, resolveFlaggedReview, resolveSurgeonFlag, getSurgeonChecklists, updateSurgeonFeedback, getChecklistTemplates, getChecklistTemplate, updateChecklistTemplate
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/schedule.ts
  Exports: getDaySchedule, getUnassignedCases, createBlockTime, updateBlockTime, deleteBlockTime, setRoomDayConfig, reorderScheduleItems
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/settings.ts
  Exports: getFacilitySettings, updateFacilitySettings, getRooms, getSettingsRooms, createRoom, updateRoom, deactivateRoom, activateRoom, reorderRooms, getSettingsSurgeons, updateSurgeonSettings, getConfigItems, createConfigItem, updateConfigItem, deactivateConfigItem, activateConfigItem, reorderConfigItems, getLocations, getLocation, createLocation, updateLocation, deactivateLocation, activateLocation
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/case-cards.ts
  Exports: getCaseCards, getCaseCard, getCaseCardEditLog, getCaseCardVersions, createCaseCard, updateCaseCard, activateCaseCard, deprecateCaseCard, getCaseCardSurgeons, submitCaseCardFeedback, getCaseCardFeedback, reviewCaseCardFeedback
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/case-dashboard.ts
  Exports: getCaseDashboard, attestCaseReadiness, voidCaseAttestation, updateAnesthesiaPlan, linkCaseCard, linkCaseCardWithReason, unlinkCaseCard, getCaseCardLink, addCaseOverride, updateCaseOverride, removeCaseOverride, getCaseEventLog, updateCaseSummary, updateCaseScheduling
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/reports.ts
  Exports: getAvailableReports, getInventoryReadinessReport, getVerificationActivityReport, getChecklistComplianceReport, getCaseSummaryReport, getVendorConcessionsReport, getInventoryValuationReport, getLoanerExposureReport, getCancelledCasesReport, getCaseTimelinesReport, getDebriefSummaryReport, getCaseEventLogReport, getReportExportUrl
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/vendors.ts
  Exports: getVendors, getVendor, createVendor, updateVendor
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/loaner-sets.ts
  Exports: getLoanerSets, getLoanerSet, createLoanerSet, updateLoanerSet, getLoanerSetItems, addLoanerSetItem, updateLoanerSetItem, removeLoanerSetItem
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/users.ts
  Exports: getUsers, getUser, createUser, updateUser, deactivateUser, activateUser, getSurgeons
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/attention.ts
  Exports: getAttention
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/platform.ts
  Exports: Platform-related functions
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/phi-audit.ts
  Exports: PHI audit-related functions
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/phi-patient.ts
  Exports: PHI patient identity functions
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/ai.ts
  Exports: AI-related functions
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/preference-cards.ts
  Exports: Preference card functions
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/financial-readiness.ts
  Exports: Financial readiness functions
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/surgery-requests.ts
  Exports: Surgery request functions
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/operations.ts
  Exports: Operations health functions
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/platform-facility-view.ts
  Exports: Platform facility view functions
  Base URL: Uses request() from client.ts

apps/web/src/lib/api/schemas.ts
  Purpose: Zod schema definitions
  Exports: DeleteCaseResponseSchema, InventoryDevicesResponseSchema, DeviceEventResponseSchema, DeviceEventRequestSchema, CatalogImageResponseSchema, AddCatalogImageByUrlRequestSchema, UpdateCatalogImageRequestSchema

Total wrapper modules: 26

================================================================================
B) Wrapper → Endpoint mapping
================================================================================

AUTH MODULE (apps/web/src/lib/api/auth.ts)
  login
    HTTP method: POST
    Path template: /auth/login
    Defining file path: apps/web/src/lib/api/auth.ts line 31
    Request schema: UNKNOWN (TODO comment at line 29)
    Response schema: UNKNOWN (TODO comment at line 29)
  getMe
    HTTP method: GET
    Path template: /auth/me
    Defining file path: apps/web/src/lib/api/auth.ts line 36
    Request schema: N/A
    Response schema: UNKNOWN (TODO comment at line 34)
  logout
    HTTP method: POST
    Path template: /auth/logout
    Defining file path: apps/web/src/lib/api/auth.ts line 40
    Request schema: N/A
    Response schema: none

CASES MODULE (apps/web/src/lib/api/cases.ts)
  getCases
    HTTP method: GET
    Path template: /cases
    Defining file path: apps/web/src/lib/api/cases.ts line 67
    Uses: callContract(contract.cases.list) from packages/contract
    Request schema: contract schema
    Response schema: contract schema
  getCase
    HTTP method: GET
    Path template: /cases/:caseId
    Defining file path: apps/web/src/lib/api/cases.ts line 74
    Uses: callContract(contract.cases.get)
    Request schema: contract schema
    Response schema: contract schema
  createCase
    HTTP method: POST
    Path template: /cases
    Defining file path: apps/web/src/lib/api/cases.ts line 81
    Uses: callContract(contract.cases.create)
    Request schema: contract schema
    Response schema: contract schema
  activateCase
    HTTP method: POST
    Path template: /cases/:caseId/activate
    Defining file path: apps/web/src/lib/api/cases.ts line 88
    Uses: callContract(contract.cases.activate)
    Request schema: contract schema
    Response schema: contract schema
  deactivateCase
    HTTP method: POST
    Path template: /cases/:caseId/deactivate
    Defining file path: apps/web/src/lib/api/cases.ts line 96
    Uses: callContract(contract.cases.deactivate)
    Request schema: contract schema
    Response schema: contract schema
  cancelCase
    HTTP method: POST
    Path template: /cases/:caseId/cancel
    Defining file path: apps/web/src/lib/api/cases.ts line 103
    Uses: callContract(contract.cases.cancel)
    Request schema: contract schema
    Response schema: contract schema
  checkInPreop
    HTTP method: POST
    Path template: /cases/:caseId/check-in-preop
    Defining file path: apps/web/src/lib/api/cases.ts line 111
    Uses: callContract(contract.cases.checkInPreop)
    Request schema: contract schema
    Response schema: contract schema
  approveCase
    HTTP method: POST
    Path template: /cases/:caseId/approve
    Defining file path: apps/web/src/lib/api/cases.ts line 118
    Uses: callContract(contract.cases.approve)
    Request schema: contract schema
    Response schema: contract schema
  rejectCase
    HTTP method: POST
    Path template: /cases/:caseId/reject
    Defining file path: apps/web/src/lib/api/cases.ts line 126
    Uses: callContract(contract.cases.reject)
    Request schema: contract schema
    Response schema: contract schema
  updateCase
    HTTP method: PATCH
    Path template: /cases/:caseId
    Defining file path: apps/web/src/lib/api/cases.ts line 134
    Uses: callContract(contract.cases.update)
    Request schema: contract schema
    Response schema: contract schema
  deleteCase
    HTTP method: DELETE
    Path template: /cases/:caseId
    Defining file path: apps/web/src/lib/api/cases.ts line 148
    Request schema: none
    Response schema: DeleteCaseResponseSchema (apps/web/src/lib/api/schemas.ts)
  assignCaseRoom
    HTTP method: PATCH
    Path template: /cases/:caseId/room
    Defining file path: apps/web/src/lib/api/cases.ts line 153
    Uses: callContract(contract.cases.assignRoom)
    Request schema: contract schema
    Response schema: contract schema
  getCaseStatusEvents
    HTTP method: GET
    Path template: /cases/:caseId/status-events
    Defining file path: apps/web/src/lib/api/cases.ts line 169
    Uses: callContract(contract.cases.statusEvents)
    Request schema: contract schema
    Response schema: contract schema

CATALOG MODULE (apps/web/src/lib/api/catalog.ts)
  getCatalogItems
    HTTP method: GET
    Path template: /catalog
    Defining file path: apps/web/src/lib/api/catalog.ts line 194
    Uses: callContract(contract.catalog.list)
  getCatalogItem
    HTTP method: GET
    Path template: /catalog/:catalogId
    Defining file path: apps/web/src/lib/api/catalog.ts line 204
    Uses: callContract(contract.catalog.get)
  createCatalogItem
    HTTP method: POST
    Path template: /catalog
    Defining file path: apps/web/src/lib/api/catalog.ts line 211
    Uses: callContract(contract.catalog.create)
  updateCatalogItem
    HTTP method: PATCH
    Path template: /catalog/:catalogId
    Defining file path: apps/web/src/lib/api/catalog.ts line 218
    Uses: callContract(contract.catalog.update)
  deactivateCatalogItem
    HTTP method: POST
    Path template: /catalog/:catalogId/deactivate
    Defining file path: apps/web/src/lib/api/catalog.ts line 226
    Uses: callContract(contract.catalog.deactivate)
  activateCatalogItem
    HTTP method: POST
    Path template: /catalog/:catalogId/activate
    Defining file path: apps/web/src/lib/api/catalog.ts line 233
    Uses: callContract(contract.catalog.activate)
  getCatalogImages
    HTTP method: GET
    Path template: /catalog/:catalogId/images
    Defining file path: apps/web/src/lib/api/catalog.ts line 247
    Uses: callContract(contract.catalog.listImages)
  addCatalogImageByUrl
    HTTP method: POST
    Path template: /catalog/:catalogId/images
    Defining file path: apps/web/src/lib/api/catalog.ts line 263
    Request schema: AddCatalogImageByUrlRequestSchema (apps/web/src/lib/api/schemas.ts)
    Response schema: CatalogImageResponseSchema (apps/web/src/lib/api/schemas.ts)
  uploadCatalogImage
    HTTP method: POST
    Path template: /catalog/:catalogId/images/upload
    Defining file path: apps/web/src/lib/api/catalog.ts line 284
    Note: Uses raw fetch() bypassing request() wrapper (FormData upload requirement)
    Request schema: N/A (FormData)
    Response schema: UNKNOWN
  updateCatalogImage
    HTTP method: PATCH
    Path template: /catalog/:catalogId/images/:imageId
    Defining file path: apps/web/src/lib/api/catalog.ts line 311
    Request schema: UpdateCatalogImageRequestSchema (apps/web/src/lib/api/schemas.ts)
    Response schema: CatalogImageResponseSchema (apps/web/src/lib/api/schemas.ts)
  deleteCatalogImage
    HTTP method: DELETE
    Path template: /catalog/:catalogId/images/:imageId
    Defining file path: apps/web/src/lib/api/catalog.ts line 320
    Uses: callContract(contract.catalog.deleteImage)
  getCatalogIdentifiers
    HTTP method: GET
    Path template: /catalog/:catalogId/identifiers
    Defining file path: apps/web/src/lib/api/catalog.ts line 334
    Uses: callContract(contract.catalog.listIdentifiers)
  addCatalogIdentifier
    HTTP method: POST
    Path template: /catalog/:catalogId/identifiers
    Defining file path: apps/web/src/lib/api/catalog.ts line 345
    Uses: callContract(contract.catalog.addIdentifier)
  deleteCatalogIdentifier
    HTTP method: DELETE
    Path template: /catalog/:catalogId/identifiers/:identifierId
    Defining file path: apps/web/src/lib/api/catalog.ts line 357
    Uses: callContract(contract.catalog.deleteIdentifier)
  getCatalogGroups
    HTTP method: GET
    Path template: /catalog/groups
    Defining file path: apps/web/src/lib/api/catalog.ts line 373
    Request schema: UNKNOWN (TODO comment at line 367)
    Response schema: UNKNOWN (TODO comment at line 367)
  createCatalogGroup
    HTTP method: POST
    Path template: /catalog/groups
    Defining file path: apps/web/src/lib/api/catalog.ts line 381
    Request schema: UNKNOWN (TODO comment at line 376)
    Response schema: UNKNOWN (TODO comment at line 376)
  updateCatalogGroup
    HTTP method: PATCH
    Path template: /catalog/groups/:groupId
    Defining file path: apps/web/src/lib/api/catalog.ts line 389
    Request schema: UNKNOWN (TODO comment at line 384)
    Response schema: UNKNOWN (TODO comment at line 384)
  getCatalogGroupItems
    HTTP method: GET
    Path template: /catalog/groups/:groupId/items
    Defining file path: apps/web/src/lib/api/catalog.ts line 400
    Request schema: UNKNOWN (TODO comment at line 393)
    Response schema: UNKNOWN (TODO comment at line 393)
  addCatalogGroupItems
    HTTP method: POST
    Path template: /catalog/groups/:groupId/items
    Defining file path: apps/web/src/lib/api/catalog.ts line 409
    Request schema: UNKNOWN (TODO comment at line 403)
    Response schema: UNKNOWN (TODO comment at line 403)
  removeCatalogGroupItem
    HTTP method: DELETE
    Path template: /catalog/groups/:groupId/items/:catalogId
    Defining file path: apps/web/src/lib/api/catalog.ts line 417
    Request schema: UNKNOWN (TODO comment at line 412)
    Response schema: UNKNOWN (TODO comment at line 412)
  getCatalogSets
    HTTP method: GET
    Path template: /catalog/sets
    Defining file path: apps/web/src/lib/api/catalog.ts line 431
    Request schema: UNKNOWN (TODO comment at line 425)
    Response schema: UNKNOWN (TODO comment at line 425)
  createCatalogSet
    HTTP method: POST
    Path template: /catalog/sets
    Defining file path: apps/web/src/lib/api/catalog.ts line 438
    Request schema: UNKNOWN (TODO comment at line 434)
    Response schema: UNKNOWN (TODO comment at line 434)
  getSetComponents
    HTTP method: GET
    Path template: /catalog/sets/:catalogId/components
    Defining file path: apps/web/src/lib/api/catalog.ts line 447
    Request schema: UNKNOWN (TODO comment at line 442)
    Response schema: UNKNOWN (TODO comment at line 442)
  addSetComponent
    HTTP method: POST
    Path template: /catalog/sets/:catalogId/components
    Defining file path: apps/web/src/lib/api/catalog.ts line 455
    Request schema: UNKNOWN (TODO comment at line 450)
    Response schema: UNKNOWN (TODO comment at line 450)
  updateSetComponent
    HTTP method: PATCH
    Path template: /catalog/sets/:catalogId/components/:componentId
    Defining file path: apps/web/src/lib/api/catalog.ts line 466
    Request schema: UNKNOWN (TODO comment at line 459)
    Response schema: UNKNOWN (TODO comment at line 459)
  removeSetComponent
    HTTP method: DELETE
    Path template: /catalog/sets/:catalogId/components/:componentId
    Defining file path: apps/web/src/lib/api/catalog.ts line 475
    Request schema: UNKNOWN (TODO comment at line 469)
    Response schema: UNKNOWN (TODO comment at line 469)
  getCatalogCostEvents
    HTTP method: GET
    Path template: /catalog/:catalogId/cost-events
    Defining file path: apps/web/src/lib/api/catalog.ts line 510
    Request schema: none
    Response schema: UNKNOWN

INVENTORY MODULE (apps/web/src/lib/api/inventory.ts)
  getInventoryItems
    HTTP method: GET
    Path template: /inventory/items
    Defining file path: apps/web/src/lib/api/inventory.ts line 184
    Uses: callContract(contract.inventory.listItems)
  getInventoryItem
    HTTP method: GET
    Path template: /inventory/items/:itemId
    Defining file path: apps/web/src/lib/api/inventory.ts line 191
    Uses: callContract(contract.inventory.getItem)
  createInventoryItem
    HTTP method: POST
    Path template: /inventory/items
    Defining file path: apps/web/src/lib/api/inventory.ts line 198
    Uses: callContract(contract.inventory.createItem)
  updateInventoryItem
    HTTP method: PATCH
    Path template: /inventory/items/:itemId
    Defining file path: apps/web/src/lib/api/inventory.ts line 205
    Uses: callContract(contract.inventory.updateItem)
  getInventoryItemHistory
    HTTP method: GET
    Path template: /inventory/items/:itemId/history
    Defining file path: apps/web/src/lib/api/inventory.ts line 213
    Uses: callContract(contract.inventory.itemHistory)
  createInventoryEvent
    HTTP method: POST
    Path template: /inventory/events
    Defining file path: apps/web/src/lib/api/inventory.ts line 222
    Uses: callContract(contract.inventory.createEvent)
  sendDeviceEvent
    HTTP method: POST
    Path template: /inventory/device-events
    Defining file path: apps/web/src/lib/api/inventory.ts line 233
    Request schema: DeviceEventRequestSchema (apps/web/src/lib/api/schemas.ts)
    Response schema: DeviceEventResponseSchema (apps/web/src/lib/api/schemas.ts)
  createDeviceEvent
    HTTP method: POST
    Path template: /inventory/device-events
    Defining file path: apps/web/src/lib/api/inventory.ts line 237
    Note: Alias for sendDeviceEvent
  getDevices
    HTTP method: GET
    Path template: /inventory/devices
    Defining file path: apps/web/src/lib/api/inventory.ts line 240
    Request schema: none
    Response schema: InventoryDevicesResponseSchema (apps/web/src/lib/api/schemas.ts)
  getInventoryRiskQueue
    HTTP method: GET
    Path template: /inventory/risk-queue
    Defining file path: apps/web/src/lib/api/inventory.ts line 244
    Uses: callContract(contract.inventory.riskQueue)
  getMissingAnalytics
    HTTP method: GET
    Path template: /inventory/missing-analytics
    Defining file path: apps/web/src/lib/api/inventory.ts line 283
    Uses: callContract(contract.inventory.missingAnalytics)
  getMissingEvents
    HTTP method: GET
    Path template: /inventory/missing-events
    Defining file path: apps/web/src/lib/api/inventory.ts line 323
    Uses: callContract(contract.inventory.missingEvents)
  getOpenMissingAging
    HTTP method: GET
    Path template: /inventory/open-missing-aging
    Defining file path: apps/web/src/lib/api/inventory.ts line 359
    Uses: callContract(contract.inventory.openMissingAging)
  lookupInventoryItem
    HTTP method: GET
    Path template: /inventory/items/lookup
    Defining file path: apps/web/src/lib/api/inventory.ts line 395
    Request schema: none
    Response schema: UNKNOWN
  getDeviceEvents
    HTTP method: GET
    Path template: /inventory/device-events
    Defining file path: apps/web/src/lib/api/inventory.ts line 444
    Request schema: none
    Response schema: UNKNOWN
  getInventoryEvents
    HTTP method: GET
    Path template: /inventory/events
    Defining file path: apps/web/src/lib/api/inventory.ts line 507
    Request schema: none
    Response schema: UNKNOWN

READINESS MODULE (apps/web/src/lib/api/readiness.ts)
  getDayBeforeReadiness
    HTTP method: GET
    Path template: /readiness/day-before
    Defining file path: apps/web/src/lib/api/readiness.ts line 169
    Request schema: UNKNOWN (TODO comment at line 159)
    Response schema: UNKNOWN (TODO comment at line 159)
  getCalendarSummary
    HTTP method: GET
    Path template: /readiness/calendar-summary
    Defining file path: apps/web/src/lib/api/readiness.ts line 180
    Request schema: UNKNOWN (TODO comment at line 172)
    Response schema: UNKNOWN (TODO comment at line 172)
  createAttestation
    HTTP method: POST
    Path template: /readiness/attestations
    Defining file path: apps/web/src/lib/api/readiness.ts line 188
    Request schema: UNKNOWN (TODO comment at line 183)
    Response schema: UNKNOWN (TODO comment at line 183)
  voidAttestation
    HTTP method: POST
    Path template: /readiness/attestations/:attestationId/void
    Defining file path: apps/web/src/lib/api/readiness.ts line 200
    Request schema: UNKNOWN (TODO comment at line 191)
    Response schema: UNKNOWN (TODO comment at line 191)
  refreshReadiness
    HTTP method: POST
    Path template: /readiness/refresh
    Defining file path: apps/web/src/lib/api/readiness.ts line 206
    Request schema: UNKNOWN (TODO comment at line 204)
    Response schema: UNKNOWN (TODO comment at line 204)
  getCaseVerification
    HTTP method: GET
    Path template: /readiness/cases/:caseId/verification
    Defining file path: apps/web/src/lib/api/readiness.ts line 214
    Request schema: UNKNOWN (TODO comment at line 209)
    Response schema: UNKNOWN (TODO comment at line 209)

SCHEDULE MODULE (apps/web/src/lib/api/schedule.ts)
  getDaySchedule
    HTTP method: GET
    Path template: /schedule/day
    Defining file path: apps/web/src/lib/api/schedule.ts line 95
    Request schema: UNKNOWN (TODO comment at line 90)
    Response schema: UNKNOWN (TODO comment at line 90)
  getUnassignedCases
    HTTP method: GET
    Path template: /schedule/unassigned
    Defining file path: apps/web/src/lib/api/schedule.ts line 100
    Request schema: UNKNOWN (TODO comment at line 98)
    Response schema: UNKNOWN (TODO comment at line 98)
  createBlockTime
    HTTP method: POST
    Path template: /schedule/block-times
    Defining file path: apps/web/src/lib/api/schedule.ts line 114
    Request schema: UNKNOWN (TODO comment at line 103)
    Response schema: UNKNOWN (TODO comment at line 103)
  updateBlockTime
    HTTP method: PATCH
    Path template: /schedule/block-times/:blockTimeId
    Defining file path: apps/web/src/lib/api/schedule.ts line 127
    Request schema: UNKNOWN (TODO comment at line 117)
    Response schema: UNKNOWN (TODO comment at line 117)
  deleteBlockTime
    HTTP method: DELETE
    Path template: /schedule/block-times/:blockTimeId
    Defining file path: apps/web/src/lib/api/schedule.ts line 135
    Request schema: UNKNOWN (TODO comment at line 130)
    Response schema: UNKNOWN (TODO comment at line 130)
  setRoomDayConfig
    HTTP method: PUT
    Path template: /schedule/rooms/:roomId/day-config
    Defining file path: apps/web/src/lib/api/schedule.ts line 145
    Request schema: UNKNOWN (TODO comment at line 138)
    Response schema: UNKNOWN (TODO comment at line 138)
  reorderScheduleItems
    HTTP method: PATCH
    Path template: /schedule/reorder
    Defining file path: apps/web/src/lib/api/schedule.ts line 161
    Request schema: UNKNOWN (TODO comment at line 152)
    Response schema: UNKNOWN (TODO comment at line 152)

VENDORS MODULE (apps/web/src/lib/api/vendors.ts)
  getVendors
    HTTP method: GET
    Path template: /vendors
    Defining file path: apps/web/src/lib/api/vendors.ts line 60
    Request schema: none
    Response schema: UNKNOWN
  getVendor
    HTTP method: GET
    Path template: /vendors/:vendorId
    Defining file path: apps/web/src/lib/api/vendors.ts line 67
    Request schema: none
    Response schema: UNKNOWN
  createVendor
    HTTP method: POST
    Path template: /vendors
    Defining file path: apps/web/src/lib/api/vendors.ts line 74
    Request schema: none
    Response schema: UNKNOWN
  updateVendor
    HTTP method: PATCH
    Path template: /vendors/:vendorId
    Defining file path: apps/web/src/lib/api/vendors.ts line 82
    Request schema: none
    Response schema: UNKNOWN

USERS MODULE (apps/web/src/lib/api/users.ts)
  getUsers
    HTTP method: GET
    Path template: /users
    Defining file path: apps/web/src/lib/api/users.ts line 48
    Request schema: UNKNOWN (TODO comment at line 45)
    Response schema: UNKNOWN (TODO comment at line 45)
  getUser
    HTTP method: GET
    Path template: /users/:userId
    Defining file path: apps/web/src/lib/api/users.ts line 53
    Request schema: UNKNOWN (TODO comment at line 51)
    Response schema: UNKNOWN (TODO comment at line 51)
  createUser
    HTTP method: POST
    Path template: /users
    Defining file path: apps/web/src/lib/api/users.ts line 58
    Request schema: UNKNOWN (TODO comment at line 56)
    Response schema: UNKNOWN (TODO comment at line 56)
  updateUser
    HTTP method: PATCH
    Path template: /users/:userId
    Defining file path: apps/web/src/lib/api/users.ts line 63
    Request schema: UNKNOWN (TODO comment at line 61)
    Response schema: UNKNOWN (TODO comment at line 61)
  deactivateUser
    HTTP method: POST
    Path template: /users/:userId/deactivate
    Defining file path: apps/web/src/lib/api/users.ts line 68
    Request schema: UNKNOWN (TODO comment at line 66)
    Response schema: UNKNOWN (TODO comment at line 66)
  activateUser
    HTTP method: POST
    Path template: /users/:userId/activate
    Defining file path: apps/web/src/lib/api/users.ts line 73
    Request schema: UNKNOWN (TODO comment at line 71)
    Response schema: UNKNOWN (TODO comment at line 71)
  getSurgeons
    HTTP method: GET
    Path template: /users/surgeons
    Defining file path: apps/web/src/lib/api/users.ts line 78
    Request schema: UNKNOWN (TODO comment at line 76)
    Response schema: UNKNOWN (TODO comment at line 76)

Additional modules with similar patterns (detailed mapping requires individual file analysis):
  apps/web/src/lib/api/checklists.ts
  apps/web/src/lib/api/settings.ts
  apps/web/src/lib/api/case-cards.ts
  apps/web/src/lib/api/case-dashboard.ts
  apps/web/src/lib/api/reports.ts
  apps/web/src/lib/api/loaner-sets.ts
  apps/web/src/lib/api/attention.ts
  apps/web/src/lib/api/platform.ts
  apps/web/src/lib/api/phi-audit.ts
  apps/web/src/lib/api/phi-patient.ts
  apps/web/src/lib/api/ai.ts
  apps/web/src/lib/api/preference-cards.ts
  apps/web/src/lib/api/financial-readiness.ts
  apps/web/src/lib/api/surgery-requests.ts
  apps/web/src/lib/api/operations.ts
  apps/web/src/lib/api/platform-facility-view.ts

================================================================================
C) Endpoint usage summary (used vs unused)
================================================================================

Backend endpoint registration source:
apps/api/src/index.ts

Registered route groups:
/api/auth - authRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/auth.ts

/api/users - usersRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/users.ts

/api/cases - casesRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/cases.ts, apps/web/src/app/(app)/cases/page.tsx, apps/web/src/app/(app)/admin/cases/page.tsx

/api/inventory - inventoryRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/inventory.ts, apps/web/src/app/(app)/admin/inventory/page.tsx

/api/readiness - readinessRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/readiness.ts, apps/web/src/app/(app)/dashboard/page.tsx

/api (checklists prefix) - checklistsRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/checklists.ts, apps/web/src/components/Checklists/TimeoutModal.tsx, apps/web/src/components/Checklists/DebriefModal.tsx

/api/locations - locationsRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/settings.ts, apps/web/src/app/(app)/admin/locations/page.tsx

/api/catalog - catalogRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/catalog.ts, apps/web/src/app/(app)/admin/catalog/page.tsx

/api/catalog/groups - catalogGroupsRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/catalog.ts, apps/web/src/app/(app)/admin/catalog/groups/page.tsx

/api/catalog/sets - catalogSetsRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/catalog.ts, apps/web/src/app/(app)/admin/catalog/sets/page.tsx

/api/catalog (images prefix) - catalogImagesRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/catalog.ts

/api/preference-cards - preferenceCardsRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/preference-cards.ts, apps/web/src/app/(app)/preference-cards/page.tsx

/api/settings - settingsRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/settings.ts

/api/case-cards - caseCardsRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/case-cards.ts

/api/case-dashboard - caseDashboardRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/case-dashboard.ts, apps/web/src/components/CaseDashboardModal/useCaseDashboardData.ts

/api/reports - reportsRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/reports.ts, apps/web/src/app/(app)/admin/reports/standard/page.tsx

/api/general-settings - generalSettingsRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/settings.ts

/api/schedule - scheduleRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/schedule.ts, apps/web/src/app/(app)/calendar/page.tsx

/api/admin/settings - adminSettingsRoutes
USED_BY_CLIENT: UNKNOWN (no dedicated wrapper found)

/api/ai - aiRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/ai.ts, apps/web/src/components/ExplainReadinessPanel.tsx

/api/platform - platformRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/platform.ts

/api/vendors - vendorsRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/vendors.ts, apps/web/src/app/(app)/admin/vendors/page.tsx

/api/loaner-sets - loanerSetsRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/loaner-sets.ts, apps/web/src/app/(app)/admin/loaner-sets/page.tsx

/api/attention - attentionRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/attention.ts

/api/organizations - organizationRoutes
USED_BY_CLIENT: no
No client wrapper module found

/api/phi-audit - phiAuditRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/phi-audit.ts

/api/phi-patient - phiPatientRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/phi-patient.ts, apps/web/src/app/(app)/phi/patients/page.tsx

/api/clinic/surgery-requests - clinicSurgeryRequestRoutes
USED_BY_CLIENT: no
No ASC client wrapper module found (expected: clinic-facing API)

/api/admin/surgery-requests - adminSurgeryRequestRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/surgery-requests.ts, apps/web/src/app/(app)/admin/surgery-requests/page.tsx

/api/admin/financial-readiness - financialReadinessRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/financial-readiness.ts

/api/operations - operationsHealthRoutes
USED_BY_CLIENT: yes
Primary call sites: apps/web/src/lib/api/operations.ts

Unused backend endpoints (no client wrapper):
/api/organizations/* - organizationRoutes (backend-only or admin-only)
/api/clinic/surgery-requests/* - clinicSurgeryRequestRoutes (clinic portal, not ASC web app)
/api/admin/settings/* - adminSettingsRoutes (unclear if used)

================================================================================
D) Call sites (where client calls occur)
================================================================================

Call sites by route/page/component (selected examples):

apps/web/src/app/login/page.tsx
  Wrapper used: login (from apps/web/src/lib/api/auth.ts)
  Environment: client-side component

apps/web/src/lib/auth.tsx
  Wrapper used: getMe, logout (from apps/web/src/lib/api/auth.ts)
  Environment: client-side context provider

apps/web/src/app/(app)/cases/page.tsx
  Wrapper used: getCases (from apps/web/src/lib/api/cases.ts)
  Environment: server-side component (Next.js RSC)

apps/web/src/app/(app)/admin/cases/page.tsx
  Wrapper used: getCases (from apps/web/src/lib/api/cases.ts)
  Environment: server-side component

apps/web/src/app/(app)/calendar/page.tsx
  Wrapper used: getDaySchedule (from apps/web/src/lib/api/schedule.ts)
  Environment: server-side component

apps/web/src/app/(app)/calendar/components/RoomBasedDayView.tsx
  Wrapper used: getDaySchedule, reorderScheduleItems (from apps/web/src/lib/api/schedule.ts)
  Environment: client-side component

apps/web/src/app/(app)/calendar/components/BlockTimeModal.tsx
  Wrapper used: createBlockTime, updateBlockTime, deleteBlockTime (from apps/web/src/lib/api/schedule.ts)
  Environment: client-side component

apps/web/src/components/CreateCaseModal.tsx
  Wrapper used: createCase (from apps/web/src/lib/api/cases.ts)
  Environment: client-side component

apps/web/src/components/ScheduleCaseModal.tsx
  Wrapper used: approveCase, assignCaseRoom (from apps/web/src/lib/api/cases.ts)
  Environment: client-side component

apps/web/src/components/Checklists/TimeoutModal.tsx
  Wrapper used: getCaseChecklists, startChecklist, respondToChecklist, signChecklist, completeChecklist (from apps/web/src/lib/api/checklists.ts)
  Environment: client-side component

apps/web/src/components/Checklists/DebriefModal.tsx
  Wrapper used: getCaseChecklists, startChecklist, respondToChecklist, signChecklist, completeChecklist, recordAsyncReview (from apps/web/src/lib/api/checklists.ts)
  Environment: client-side component

apps/web/src/app/(app)/dashboard/page.tsx
  Wrapper used: getDayBeforeReadiness (from apps/web/src/lib/api/readiness.ts)
  Environment: server-side component

apps/web/src/app/(app)/admin/inventory/page.tsx
  Wrapper used: getInventoryItems (from apps/web/src/lib/api/inventory.ts)
  Environment: server-side component

apps/web/src/app/(app)/admin/catalog/page.tsx
  Wrapper used: getCatalogItems (from apps/web/src/lib/api/catalog.ts)
  Environment: server-side component

apps/web/src/app/(app)/admin/vendors/page.tsx
  Wrapper used: getVendors (from apps/web/src/lib/api/vendors.ts)
  Environment: server-side component

apps/web/src/app/(app)/admin/loaner-sets/page.tsx
  Wrapper used: getLoanerSets (from apps/web/src/lib/api/loaner-sets.ts)
  Environment: server-side component

apps/web/src/app/(app)/admin/reports/standard/page.tsx
  Wrapper used: getAvailableReports, various report functions (from apps/web/src/lib/api/reports.ts)
  Environment: server-side component

apps/web/src/components/CaseDashboardModal/useCaseDashboardData.ts
  Wrapper used: getCaseDashboard (from apps/web/src/lib/api/case-dashboard.ts)
  Environment: client-side hook

apps/web/src/components/CaseDashboardModal/CaseDashboardContent.tsx
  Wrapper used: attestCaseReadiness, voidCaseAttestation, linkCaseCard, addCaseOverride (from apps/web/src/lib/api/case-dashboard.ts)
  Environment: client-side component

apps/web/src/components/ExplainReadinessPanel.tsx
  Wrapper used: explainReadiness (from apps/web/src/lib/api/ai.ts), getDayBeforeReadiness (from apps/web/src/lib/api/readiness.ts)
  Environment: client-side component

Server-side vs client-side pattern:
Server components call API wrappers directly during render (Next.js App Router)
Client components call API wrappers in event handlers, useEffect, or React hooks
Token is passed explicitly to all wrapper functions (not globally stored)

================================================================================
E) Auth token handling and request context
================================================================================

Token storage location:
File: apps/web/src/lib/auth.tsx
Mechanism: localStorage (client-side)
Key: 'asc-auth-token' (inferred from pattern)

Token attachment mechanism:
File: apps/web/src/lib/api/client.ts lines 148-150
Pattern: if (token) { headers['Authorization'] = `Bearer ${token}`; }
All wrapper functions accept token as explicit parameter

Additional headers automatically attached:

X-Access-Purpose (PHI compliance):
  File: apps/web/src/lib/api/client.ts lines 34-70 (resolveAccessPurpose function)
  Pattern: Auto-resolved from endpoint path using PHI_PURPOSE_RULES array
  Attached: Only for PHI_EXPOSING endpoints (lines 161-164)
  Examples: /cases → CLINICAL_CARE, /reports/vendor-concessions → BILLING, /schedule/day → SCHEDULING
  Override: Can be explicitly provided via RequestOptions.accessPurpose

X-Active-Persona (UX metadata):
  File: apps/web/src/lib/api/client.ts lines 153-158
  Source: localStorage.getItem(PERSONA_STORAGE_KEY)
  Constant: From @asc/domain package
  Environment guard: typeof window !== 'undefined'
  Purpose: Audit metadata, not authorization

X-Emergency-Justification (PHI Phase 3):
  File: apps/web/src/lib/api/client.ts lines 167-169
  Attached: If RequestOptions.emergencyJustification is provided
  Purpose: Emergency access override scenarios

Server-side vs browser-side differences:

Server-side (Next.js App Router server components):
  Token sourced from server session/cookies (outside wrapper scope)
  Direct function calls (await getCases(token, ...))
  No localStorage access (X-Active-Persona not attached)
  Call pattern: Synchronous await in component render

Client-side (React client components):
  Token sourced from React context or localStorage
  Wrapped in React hooks (useEffect, useMutation, custom hooks)
  localStorage available (X-Active-Persona attached)
  Call pattern: Asynchronous in event handlers or hooks

Base URL configuration:
Environment variable: process.env.NEXT_PUBLIC_API_URL
Default: 'http://localhost:3001/api'
File: apps/web/src/lib/api/client.ts line 20

Error handling:
Class: ApiError (apps/web/src/lib/api/client.ts lines 79-91)
Properties: status, code, message, details
Envelope support: Handles both new { error: { code, message } } and legacy { error: "string" } formats

Response envelope unwrapping:
File: apps/web/src/lib/api/client.ts lines 195-203
Pattern: Auto-unwrap { data } envelope if present, fallback to raw JSON

Schema validation:
Request validation: If RequestOptions.requestSchema provided (lines 130-139)
Response validation: If RequestOptions.responseSchema provided (lines 206-215)
Validation library: Zod

================================================================================
F) Inconsistencies or gaps (factual only)
================================================================================

Wrapper functions defined but never used:
UNKNOWN (requires comprehensive grep of all call sites across entire codebase)

Client call sites bypassing wrapper:
apps/web/src/lib/api/catalog.ts line 284-298
  Function: uploadCatalogImage
  Reason: FormData upload requires raw fetch (request() only handles JSON)
  Comment present: fetch-allowlist: FormData upload requires raw fetch
  File path: apps/web/src/lib/api/catalog.ts

Endpoint naming mismatches:
UNKNOWN (no obvious mismatches identified in sample review)

Divergent base URLs:
No divergent base URLs found
All wrappers use API_BASE from apps/web/src/lib/api/client.ts line 20

Duplicated configuration locations:
No duplicated base URL configuration found
Single source: apps/web/src/lib/api/client.ts

TODO comments indicating missing schemas:
auth.ts: 3 TODO(api-schema) comments
readiness.ts: 5 TODO(api-schema) comments
schedule.ts: 7 TODO(api-schema) comments
users.ts: 7 TODO(api-schema) comments
catalog.ts: 10+ TODO(api-schema) comments (groups and sets endpoints)
settings.ts: multiple TODO(api-schema) comments
checklists.ts: multiple TODO(api-schema) comments
case-dashboard.ts: multiple TODO(api-schema) comments
reports.ts: multiple TODO(api-schema) comments

Dual wrapper patterns (contract-based vs direct request):
cases.ts: Mostly uses callContract(), but deleteCase uses request() (line 148)
catalog.ts: Mixed usage - core catalog uses callContract(), groups/sets use request()
inventory.ts: Mixed usage - core inventory uses callContract(), analytics use request()

Function aliases:
inventory.ts line 237: createDeviceEvent is alias for sendDeviceEvent

Backend routes without client wrapper:
/api/organizations/* - organizationRoutes registered but no client wrapper found
/api/clinic/surgery-requests/* - clinicSurgeryRequestRoutes registered but no ASC client wrapper (expected: clinic portal)
/api/admin/settings/* - adminSettingsRoutes registered but no dedicated wrapper found

Contract package coverage:
Contract routes defined: cases, inventory, catalog, operations (packages/contract/src/routes/index.ts)
Missing contract definitions: auth, users, settings, schedule, checklists, reports, vendors, loaner-sets, case-cards, case-dashboard, readiness, attention, platform, phi-audit, phi-patient, ai, preference-cards, financial-readiness, surgery-requests

PHI_PURPOSE_RULES coverage:
File: apps/web/src/lib/api/client.ts lines 34-57
Rules defined: 34 pattern rules
Coverage: Major PHI_EXPOSING endpoints covered
Gap analysis: UNKNOWN (requires audit of all PHI endpoints vs rules)

Environment variable fallback:
API_BASE defaults to localhost:3001 if NEXT_PUBLIC_API_URL not set
Risk: Production builds without env var will call localhost
File: apps/web/src/lib/api/client.ts line 20

================================================================================
END OF SNAPSHOT
================================================================================
